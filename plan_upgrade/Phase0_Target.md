# Phase 0 – Target Definition and Constraints

## Purpose

Clearly define the end-state for CreatureStudio’s rendering pipeline so that all following phases are aligned.
The main goal is to make every blueprint-driven creature in CreatureStudio go through a rich, Zoo-style
procedural pipeline (like the current ElephantGenerator), but in a general, reusable way.

## Objectives

1. **Unify the mental model**
   - Zoo’s `ElephantGenerator` is the “golden” example of a species-specific procedural pipeline.
   - CreatureStudio should reproduce that level of fidelity and control for *any* species blueprint
     (Elephant, Cat, future quadrupeds/bipeds/winged creatures, etc.).
   - Geometry, skeleton, materials, and behavior should be driven from a shared blueprint schema where possible.

2. **Clarify scope and non-goals**
   - **In scope:**
     - Three.js-based skeleton + procedural SkinnedMesh generation for all blueprints.
     - A generalized runtime in CreatureStudio that reads a blueprint and builds a creature using reusable
       body-part generators.
     - Optional species-specific locomotion (e.g., ElephantLocomotion) triggered by blueprint behavior metadata.
   - **Out of scope (for this upgrade):**
     - Non-Three.js renderers (e.g., WebGPU-only pipeline).
     - Complex simulation (physics, AI, inter-creature interaction) beyond basic locomotion.
     - Full-blown in-UI blueprint editing (we’ll focus on read-only + generation first).

3. **Define success criteria**
   - For Elephant:
     - The CreatureStudio elephant generated from `ElephantBlueprint.json` is visually indistinguishable
       from the Zoo elephant generated by `ElephantGenerator` when viewed side-by-side in the same scene
       and lighting.
     - Skeleton hierarchy, bone names, and bone positions match the golden `ElephantDefinition`.
     - Locomotion and idle behaviors feel the same when driven by the same behavior controller.
   - For other species:
     - New quadrupeds/bipeds created purely from blueprint data (no custom generator code) look good,
       animate without artifacts, and can share technology with Zoo.
   - For the architecture:
     - Adding a new species is “data-first”: primarily a matter of adding/editing a blueprint file and,
       only when truly needed, wiring new behavior controllers.

4. **Constraints and assumptions**
   - **Three.js-based runtime** remains the primary renderer.
   - The blueprint schema will be versioned (e.g., semantic version in `meta.schemaVersion`) so upgrades
     are non-destructive and reversible.
   - The same `ElephantDefinition.js` skeleton remains the golden source for bone naming and hierarchy.
   - Performance must remain reasonable:
     - A single creature should build in well under a second in a typical dev browser.
     - Complexity of geometry should be controllable via blueprint options (e.g., lowPoly vs high detail).

## Deliverables

- Definition of the final desired state captured in this Phase 0 document.
- A short checklist of “done” for the entire upgrade:

  - [ ] Zoo and CreatureStudio both rely on the same anatomical generator library.
  - [ ] CreatureStudio has a `buildCreatureFromBlueprint` runtime that can handle all current species.
  - [ ] `ElephantBlueprint.json` encodes all the parameters currently hard-coded in `ElephantGenerator`.
  - [ ] Behavior controllers are selected via blueprint metadata in both projects.
  - [ ] New species can be introduced and validated with minimal code changes.

## Risks

- **Schema creep:** blueprint fields may grow too complex; mitigated via clear versioning and defaults.
- **Over-specialization to Elephant:** over-fitting to Elephant may make it harder to support small cats, birds,
  or fantasy creatures; mitigated by extracting generic building blocks and only using elephant-specific flags
  when needed.
- **Refactor fatigue:** touching both Zoo and CreatureStudio may introduce regressions; mitigate via a small but
  meaningful set of visual and unit tests for the generators.

## Exit Criteria

- All team members (you, future contributors, and any assistant agents) understand:
  - The target architecture.
  - The relationship between Zoo and CreatureStudio.
  - The role of the blueprint as the single source of truth for the creature’s body plan, skeleton, geometry,
    materials, and behavior metadata.
- Phases 1–6 have clear, agreed-upon goals and can be implemented incrementally without blocking day-to-day work.
